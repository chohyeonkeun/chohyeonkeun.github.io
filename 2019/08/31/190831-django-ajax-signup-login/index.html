<!DOCTYPE html>
<html lang="ko">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="naver-site-verification" content="c017b080593f962c8c0a7ca644404511803c6484">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="신입개발자 조누스로써의 역량을 키워가는 과정이 담겨있는 개발로그입니다.">
  <meta property="og:title" content="조누스의 걸음마 개발로그">
  <meta property="og:description" content="안녕하세요 열정괴물 신입개발자 조누스의 개발로그입니다.">
  <meta property="og:url" content="https://chohyeonkeun.github.io">
  <title>장고 - ajax를 이용한 회원가입 및 로그인 기능 적용 | 조누스의 걸음마 개발 로그</title>
  
  
  
  <link rel="canonical" href="https://chohyeonkeun.github.io/2019/08/31/190831-django-ajax-signup-login/">
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
<div class="Shell">
    <aside class="SideBar">
    <section class="avatar" style="background-image: url()">
        <div class="av-pic" style="background-image: url(/assets/me.jpg)">
        </div>
    </section>
    <section class="menu">
	<div>웹 프로그래머</div>
        <div style="font-weight: bold">조누스의 걸음마 개발 로그</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
            <a href="/tags/" class="Btn">
              <li>Tags</li>
            </a>  
          
            <a href="/about/" class="Btn">
              <li>About</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
            
                <a href="https://github.com/chohyeonkeun">
                    <img src="/assets/github.svg">
                </a>
            
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <div>
  <article class="ContentView">
    <header class="PageTitle">
        <h1>장고 - ajax를 이용한 회원가입 및 로그인 기능 적용</h1>
    </header>

    <section>
      <ul>
<li>ajax를 이용한 회원가입 및 로그인 기능 적용 방법에 대해 알아볼 것입니다.</li>
</ul>
<blockquote>
<p>ex) extore_project</p>
</blockquote>
<h2 id="1-회원가입-로그인-템플릿-디자인-및-ajax-통신-코드-작성"><a href="#1-회원가입-로그인-템플릿-디자인-및-ajax-통신-코드-작성" class="headerlink" title="1. 회원가입, 로그인 템플릿 디자인 및 ajax 통신 코드 작성"></a>1. 회원가입, 로그인 템플릿 디자인 및 ajax 통신 코드 작성</h2><ul>
<li>경로: extore_project &gt; layout &gt; base.html</li>
</ul>
<a id="more"></a>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"</span> <span class="attr">integrity</span>=<span class="string">"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">'https://fonts.googleapis.com/css?family=Satisfy'</span> <span class="attr">rel</span>=<span class="string">'stylesheet'</span> <span class="attr">type</span>=<span class="string">'text/css'</span>&gt;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    &#123;% if user.is_authenticated %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'accounts:logout' %&#125;"</span> <span class="attr">class</span>=<span class="string">"user-logout"</span>&gt;</span>로그아웃<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">"float:left;"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">data-toggle</span>=<span class="string">"modal"</span> <span class="attr">data-target</span>=<span class="string">"#loginModal"</span> <span class="attr">data-whatever</span>=<span class="string">"@getbootstrap"</span>&gt;</span>로그인<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">data-tog-gle</span>=<span class="string">"modal"</span> <span class="attr">data-target</span>=<span class="string">"#signupModal"</span> <span class="attr">data-whatever</span>=<span class="string">"@getbootstrap"</span> &gt;</span>회원가입<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--회원가입 modal--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">id</span>=<span class="string">"signupModal"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-labelledby</span>=<span class="string">"signupModalLabel"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span> <span class="attr">role</span>=<span class="string">"document"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">"modal-title"</span> <span class="attr">id</span>=<span class="string">"signupModalLabel"</span>&gt;</span>회원가입<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">aria-label</span>=<span class="string">"Close"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> <span class="attr">class</span>=<span class="string">"btn-close"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"user-signup"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">        &#123;% csrf_token %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"signup-user-email"</span> <span class="attr">class</span>=<span class="string">"col-form-label"</span>&gt;</span>이메일 주소<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"ex. adc@abc.com"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"signup-user-email"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"signup-user-name"</span> <span class="attr">class</span>=<span class="string">"col-form-label"</span>&gt;</span>이름<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"ex. 홍길동"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"signup-user-name"</span> <span class="attr">name</span>=<span class="string">"realName"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"signup-user-profile"</span> <span class="attr">class</span>=<span class="string">"col-form-label"</span>&gt;</span>프로필 사진<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"signup-user-profile"</span> <span class="attr">name</span>=<span class="string">"profile"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"signup-user-phonenumber"</span> <span class="attr">class</span>=<span class="string">"col-form-label"</span>&gt;</span>휴대폰 번호<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"ex. 01012345678"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"signup-user-phonenumber"</span> <span class="attr">name</span>=<span class="string">"phoneNumber"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"signup-user-password"</span> <span class="attr">class</span>=<span class="string">"col-form-label"</span>&gt;</span>비밀번호<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"8자리 이상 (영어 대문자, 소문자, 숫자, 특수문자 중 3종류 조합)"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"signup-user-password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"signup-user-password2"</span> <span class="attr">class</span>=<span class="string">"col-form-label"</span>&gt;</span>비밀번호 확인<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"비밀번호 재입력"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"signup-user-password2"</span> <span class="attr">name</span>=<span class="string">"password2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn-close btn btn-secondary"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>돌아가기<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'accounts:signup' %&#125;"</span> <span class="attr">class</span>=<span class="string">"btn-signup btn btn-primary"</span>&gt;</span>가입하기<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--로그인 modal--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">id</span>=<span class="string">"loginModal"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-labelledby</span>=<span class="string">"loginModalLabel"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span> <span class="attr">role</span>=<span class="string">"document"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">"modal-title"</span> <span class="attr">id</span>=<span class="string">"loginModalLabel"</span>&gt;</span>로그인<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">aria-label</span>=<span class="string">"Close"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"btn-close"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"user-login"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">        &#123;% csrf_token %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"login-user-email"</span> <span class="attr">class</span>=<span class="string">"col-form-label"</span>&gt;</span>이메일 주소<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"이메일 주소 입력"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"login-user-email"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"login-user-password"</span> <span class="attr">class</span>=<span class="string">"col-form-label"</span>&gt;</span>비밀번호<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"비밀번호 입력"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"login-user-password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn-close btn btn-secondary"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>돌아가기<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'accounts:login' %&#125;"</span> <span class="attr">class</span>=<span class="string">"btn-login btn btn-primary"</span>&gt;</span>로그인하기<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">$(function()&#123;</span></span><br><span class="line"><span class="undefined">    // 회원가입, 로그인 창 닫기</span></span><br><span class="line"><span class="undefined">    $('.btn-close').click(function(e)&#123;</span></span><br><span class="line"><span class="undefined">        // 회원가입, 로그인 창 닫을 시 현재 화면으로 새로고침</span></span><br><span class="line"><span class="undefined">        location.reload();</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    // 회원가입 진행</span></span><br><span class="line"><span class="undefined">    $('.btn-signup').click(function(e)&#123;</span></span><br><span class="line"><span class="undefined">        // btn-signup 클래스 부분을 클릭 시, 링크 이동 등 어떠한 행위도 동작하지 않도록 해주는 함수 -&gt; ajax 작동 위해 필요한 선행 작업</span></span><br><span class="line"><span class="undefined">        e.preventDefault();</span></span><br><span class="line"><span class="undefined">        // btn-signup 클래스에서 'href' 속성 값을 가져와 url 변수에 저장</span></span><br><span class="line"><span class="undefined">        var url = $(this).attr('href');</span></span><br><span class="line"><span class="undefined">        // user-signup 아이디(여기선 회원가입 form 태그) 부분의 html 태그를 form 변수에 저장</span></span><br><span class="line"><span class="undefined">        var form = $('#user-signup')[0];</span></span><br><span class="line"><span class="undefined">        // form 태그 안에 있는 모든 input으로 입력한 value값을 'name'을 key로 하여, formData 변수에 저장 </span></span><br><span class="line"><span class="xml">        // --&gt; ex. <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"이메일 주소 입력"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"login-user-email"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span> 에서 유저가 positipman@gmail.com을 입력했다면, formData에서 key는 email, value는 positipman@gmail.com 이 된다.</span></span><br><span class="line"><span class="undefined">        var formData = new FormData(form);</span></span><br><span class="line"><span class="undefined">        // formData에 image 데이터가 없다면, set 함수를 이용하여 "profile"이라는 이름을 key로 하여 입력받은 이미지 데이터를 value로 업데이트 시켜준다.</span></span><br><span class="line"><span class="undefined">        formData.set("profile", $('#signup-user-profile')[0].files[0]);</span></span><br><span class="line"><span class="undefined">        var realName = $('#signup-user-name').val();</span></span><br><span class="line"><span class="undefined">        $.ajax(&#123;</span></span><br><span class="line"><span class="undefined">            url : url,</span></span><br><span class="line"><span class="undefined">            // form에 file type 이 있는 경우 enctype: 'multipart/form-data'를 설정해야 한다.</span></span><br><span class="line"><span class="undefined">            enctype: 'multipart/form-data',</span></span><br><span class="line"><span class="undefined">            // formData를 이용하기 위해서 아래 processData, contentType을 반드시 false로 설정해줘야 한다.</span></span><br><span class="line"><span class="undefined">            processData: false,</span></span><br><span class="line"><span class="undefined">            contentType: false,</span></span><br><span class="line"><span class="undefined">            // ajax 통신 중, cache가 남아서 갱신 데이터를 받아오지 못하는 경우 사용한다.</span></span><br><span class="line"><span class="undefined">            cache: false,</span></span><br><span class="line"><span class="undefined">            type: "POST",</span></span><br><span class="line"><span class="undefined">            // data로는 formData를 request로 보낸다.</span></span><br><span class="line"><span class="undefined">            data: formData,</span></span><br><span class="line"><span class="undefined">        &#125;).done(function(data)&#123;</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 회원가입 정상 진행해도 무방하여 &#123;'works':True&#125;를 JsonResponse로 보낸 경우</span></span><br><span class="line"><span class="undefined">            if(data.works)&#123;</span></span><br><span class="line"><span class="undefined">                alert('환영합니다 '+realName+'님\n'+'회원가입이 성공적으로 완료되었습니다.');</span></span><br><span class="line"><span class="undefined">                location.reload();</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자 이메일 주소가 없다고 &#123;'noEmail':True&#125;를 JsonResponse로 보낸 경우</span></span><br><span class="line"><span class="undefined">            &#125; else if(data.noEmail) &#123;</span></span><br><span class="line"><span class="undefined">                alert('이메일 주소를 입력해주세요.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자 이름이 없다고 &#123;'noRealName':True&#125;를 JsonResponse로 보낸 경우</span></span><br><span class="line"><span class="undefined">            &#125; else if(data.noRealName) &#123;</span></span><br><span class="line"><span class="undefined">                alert('이름을 입력해주세요.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자 패스워드가 없다고 &#123;'noPassword':True&#125;를 JsonResponse로 보낸 경우</span></span><br><span class="line"><span class="undefined">            &#125; else if(data.noPassword) &#123;</span></span><br><span class="line"><span class="undefined">                alert('비밀번호를 입력해주세요.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자 2차 패스워드가 없다고 &#123;'noPassword2':True&#125;를 JsonResponse로 보낸 경우</span></span><br><span class="line"><span class="undefined">            &#125; else if(data.noPassword2) &#123;</span></span><br><span class="line"><span class="undefined">                alert('비밀번호를 확인해주세요.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자 프로필사진이 없다고 &#123;'noProfile':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.noProfile) &#123;</span></span><br><span class="line"><span class="undefined">                alert('프로필 사진을 등록해주세요.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자 연락처가 없다고 &#123;'noPhoneNumber':True&#125;를 JsonResponse로 보낸 경우</span></span><br><span class="line"><span class="undefined">            &#125; else if(data.noPhoneNumber) &#123;</span></span><br><span class="line"><span class="undefined">                alert('휴대폰 번호를 입력해주세요.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 잘못된 이메일 형식을 입력했다고 &#123;'wrongEmail':True&#125;를 JsonResponse로 보낸 경우</span></span><br><span class="line"><span class="undefined">            &#125; else if(data.wrongEmail) &#123;</span></span><br><span class="line"><span class="undefined">                alert('올바른 이메일 주소 형식이 아닙니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 입력한 이메일이 이미 존재한다고 &#123;'emailExists':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.emailExists)&#123;</span></span><br><span class="line"><span class="undefined">                alert('입력하신 이메일이 이미 등록되어있습니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 입력한 연락처가 이미 존재한다고 &#123;'noProfile':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.phoneNumberExists)&#123;</span></span><br><span class="line"><span class="undefined">                alert('입력하신 휴대폰 번호가 이미 등록되어있습니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 입력한 연락처에 숫자가 아닌 문자가 입력되어 &#123;'notNumber':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.notNumber)&#123;</span></span><br><span class="line"><span class="undefined">                alert('휴대폰 번호로는 숫자만 입력해야 합니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 입력한 연락처가 허용길이를 초과한다고 &#123;'tooLongNumber':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.tooLongNumber)&#123;</span></span><br><span class="line"><span class="undefined">                alert('입력하신 휴대폰 번호는 허용 길이를 초과합니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 입력한 연락처가 허용길이를 만족하지 못한다고 &#123;'tooShortNumber':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.tooShortNumber)&#123;</span></span><br><span class="line"><span class="undefined">                alert('입력하신 휴대폰 번호는 허용 길이를 만족하지 못합니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자 이름에 영문자, 숫자, 특수문자가 포함되어 &#123;'wrongName':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.wrongName)&#123;</span></span><br><span class="line"><span class="undefined">                alert('이름엔 영문자, 숫자, 특수문자가 허용되지 않습니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 입력한 이름이 허용길이를 초과한다고 &#123;'tooLongName':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.tooLongName)&#123;</span></span><br><span class="line"><span class="undefined">                alert('입력하신 이름은 허용 길이를 초과합니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 입력한 비밀번호가 허용길이를 만족하지 못한다고 &#123;'tooShortPwd':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.tooShortPwd)&#123;</span></span><br><span class="line"><span class="undefined">                alert('비밀번호는 최소 8자리 이상이어야 합니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 입력한 비밀번호가 잘못된 형식이라고 &#123;'wrongCombination':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.wrongCombination)&#123;</span></span><br><span class="line"><span class="undefined">                alert('비밀번호는 최소 영어 소문자/대문자, 숫자, 특수문자 중,\n 3개 이상 조합으로 구성되어야 합니다.');</span></span><br><span class="line"><span class="undefined">            // request 보낸 url에서 사용자가 입력한 2차 비밀번호가 1차 비밀번호와 다르다고 &#123;'notMatch':True&#125;를 JsonResponse로 보낸 경우    </span></span><br><span class="line"><span class="undefined">            &#125; else if(data.notMatch)&#123;</span></span><br><span class="line"><span class="undefined">                alert('재입력한 비밀번호가 이전 비밀번호와 일치하지 않습니다.');</span></span><br><span class="line"><span class="undefined">            // 그 밖 모든 data를 JsonResponse로 보낸 경우</span></span><br><span class="line"><span class="undefined">            &#125; else &#123;</span></span><br><span class="line"><span class="undefined">                alert('정상 요청이 아닙니다.');</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    // 로그인 진행</span></span><br><span class="line"><span class="undefined">    $('.btn-login').click(function(e)&#123;</span></span><br><span class="line"><span class="undefined">        e.preventDefault();</span></span><br><span class="line"><span class="undefined">        var url = $(this).attr('href');</span></span><br><span class="line"><span class="undefined">        var form = $('#user-login')[0];</span></span><br><span class="line"><span class="undefined">        var formData = new FormData(form);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        $.ajax(&#123;</span></span><br><span class="line"><span class="undefined">            url : url,</span></span><br><span class="line"><span class="undefined">            enctype: 'multipart/form-data',</span></span><br><span class="line"><span class="undefined">            processData: false,</span></span><br><span class="line"><span class="undefined">            contentType: false,</span></span><br><span class="line"><span class="undefined">            cache: false,</span></span><br><span class="line"><span class="undefined">            method : 'POST',</span></span><br><span class="line"><span class="undefined">            data : formData,</span></span><br><span class="line"><span class="undefined">        &#125;).done(function(data)&#123;</span></span><br><span class="line"><span class="undefined">            if(data.works)&#123;</span></span><br><span class="line"><span class="undefined">                alert('로그인되었습니다.')</span></span><br><span class="line"><span class="undefined">                location.reload();</span></span><br><span class="line"><span class="undefined">            &#125; else if(data.wrongInformation) &#123;</span></span><br><span class="line"><span class="undefined">                alert('입력된 정보와 일치하는 회원 정보가 없습니다.');</span></span><br><span class="line"><span class="undefined">                $('#login-user-email').val("");</span></span><br><span class="line"><span class="undefined">                $('#login-user-password').val("");</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125; else if(data.noEmail) &#123;</span></span><br><span class="line"><span class="undefined">                alert('이메일 주소를 입력해주세요.');</span></span><br><span class="line"><span class="undefined">                $('#login-user-password').val("");</span></span><br><span class="line"><span class="undefined">            &#125; else if(data.noPassword) &#123;</span></span><br><span class="line"><span class="undefined">                alert('비밀번호를 입력해주세요.');</span></span><br><span class="line"><span class="undefined">            &#125; else &#123;</span></span><br><span class="line"><span class="undefined">                alert('정상 요청이 아닙니다.');</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    // 로그아웃 진행</span></span><br><span class="line"><span class="undefined">    $('.user-logout').click(function(e)&#123;</span></span><br><span class="line"><span class="undefined">        e.preventDefault();</span></span><br><span class="line"><span class="undefined">        var url = $(this).attr('href');</span></span><br><span class="line"><span class="undefined">        var check = confirm('로그아웃 하시겠습니까?');</span></span><br><span class="line"><span class="undefined">        if(check==true)&#123;</span></span><br><span class="line"><span class="undefined">            $.ajax(&#123;</span></span><br><span class="line"><span class="undefined">                url : url,</span></span><br><span class="line"><span class="undefined">                method : "POST",</span></span><br><span class="line"><span class="undefined">                data : &#123;</span></span><br><span class="line"><span class="undefined">                    'csrfmiddlewaretoken' : '&#123;&#123;csrf_token&#125;&#125;',</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">            &#125;).done(function(data)&#123;</span></span><br><span class="line"><span class="undefined">                if(data.works)&#123;</span></span><br><span class="line"><span class="undefined">                    alert('로그아웃 되었습니다.');</span></span><br><span class="line"><span class="undefined">                    location.reload();</span></span><br><span class="line"><span class="undefined">                &#125; else &#123;</span></span><br><span class="line"><span class="undefined">                    alert('정상 요청이 아닙니다.');</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125; else &#123;</span></span><br><span class="line"><span class="undefined">            location.reload();</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</code></pre><h2 id="2-ajax로-request-data-송신할-url-경로-설정"><a href="#2-ajax로-request-data-송신할-url-경로-설정" class="headerlink" title="2. ajax로 request data 송신할 url 경로 설정"></a>2. ajax로 request data 송신할 url 경로 설정</h2><ul>
<li>경로 : accounts &gt; urls.py  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">app_name = <span class="string">'accounts'</span></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'signup/'</span>, user_signup, name=<span class="string">'signup'</span>),</span><br><span class="line">    path(<span class="string">'login/'</span>, user_login, name=<span class="string">'login'</span>),</span><br><span class="line">    path(<span class="string">'logout/'</span>, user_logout, name=<span class="string">'logout'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-response-data-보내줄-view-작성"><a href="#3-response-data-보내줄-view-작성" class="headerlink" title="3. response data 보내줄 view 작성"></a>3. response data 보내줄 view 작성</h2><ul>
<li>경로 : accounts &gt; views.py  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> login, logout, authenticate</span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse, Http404</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.template.loader <span class="keyword">import</span> render_to_string</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> extore.models <span class="keyword">import</span> Group, InviteStatus, InviteDate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 사용자 회원가입</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_signup</span><span class="params">(request)</span>:</span>        </span><br><span class="line">    <span class="comment"># request 요청이 ajax 요청인 경우 is_ajax() 함수 사용</span></span><br><span class="line">    <span class="keyword">if</span> request.is_ajax():</span><br><span class="line">        <span class="comment"># POST 방식으로 요청한 경우, 해당 name이 email인 값을 가져오고 싶은 경우, request.POST.get('email') 사용</span></span><br><span class="line">        <span class="comment"># request 보낸 email 이 빈 문자열인 경우</span></span><br><span class="line">        <span class="keyword">if</span> request.POST.get(<span class="string">'email'</span>) == <span class="string">""</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'noEmail'</span>:<span class="literal">True</span>&#125;)            </span><br><span class="line">        <span class="keyword">elif</span> request.POST.get(<span class="string">'realName'</span>) == <span class="string">""</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'noRealName'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line">        <span class="comment"># request 요청에서 file type이 있는 경우, 해당 데이터는 request.FILES.get(name)으로 가져온다.                </span></span><br><span class="line">        <span class="keyword">elif</span> request.FILES.get(<span class="string">'profile'</span>, <span class="literal">None</span>) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'noProfile'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line">        <span class="keyword">elif</span> request.POST.get(<span class="string">'phoneNumber'</span>) == <span class="string">""</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'noPhoneNumber'</span>: <span class="literal">True</span>&#125;)</span><br><span class="line">        <span class="keyword">elif</span> request.POST.get(<span class="string">'password'</span>) == <span class="string">""</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'noPassword'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line">        <span class="keyword">elif</span> request.POST.get(<span class="string">'password2'</span>) == <span class="string">""</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'noPassword2'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># request로 받은 email 값이 이메일 형식이 아닌 경우</span></span><br><span class="line">        signup_email = request.POST.get(<span class="string">'email'</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">'@'</span> <span class="keyword">not</span> <span class="keyword">in</span> signup_email <span class="keyword">or</span> <span class="string">'.'</span> <span class="keyword">not</span> <span class="keyword">in</span> signup_email:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'wrongEmail'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        index = signup_email.index(<span class="string">'.'</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            signup_email[index + <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">except</span> IndexError:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'wrongEmail'</span>: <span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># request로 받은 email 값이 이미 등록된 email인 경우</span></span><br><span class="line">        <span class="keyword">if</span> User.objects.filter(username=request.POST.get(<span class="string">'email'</span>)).exists():</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'emailExists'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># request로 받은 phoneNumber 값이 이미 등록된 phoneNumber인 경우</span></span><br><span class="line">        <span class="keyword">if</span> User.objects.filter(phone_number=request.POST.get(<span class="string">'phoneNumber'</span>)).exists():</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'phoneNumberExists'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># request로 받은 phoneNumber 길이가 적합하지 않은 경우</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            int(request.POST.get(<span class="string">'phoneNumber'</span>))</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'notNumber'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> len(request.POST.get(<span class="string">'phoneNumber'</span>))&gt;<span class="number">11</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'tooLongNumber'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line">        <span class="keyword">if</span> len(request.POST.get(<span class="string">'phoneNumber'</span>)) &lt; <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'tooShortNumber'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># request로 받은 realName에 영문자, 숫자, 특수문자가 존재하는 경우</span></span><br><span class="line">        wrong_str = re.compile(<span class="string">'[a-zA-Z0-9-=+,#/\?:^$.@*\"※~&amp;%ㆍ!』\\‘|\(\)\[\]\&lt;\&gt;`\'…》]'</span>)</span><br><span class="line">        <span class="keyword">if</span> wrong_str.search(request.POST.get(<span class="string">'realName'</span>)):</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'wrongName'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># request로 받은 realName 길이가 5자리를 초과한 경우</span></span><br><span class="line">        <span class="keyword">if</span> len(request.POST.get(<span class="string">'realName'</span>)) &gt; <span class="number">5</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'tooLongName'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># request로 받은 password가 비밀번호 형식에 적합하지 않은 경우 (8자리이상 &amp; 영어 소문자/대문자/특수문자/숫자 중 3개 이상 조합)</span></span><br><span class="line">        password = request.POST.get(<span class="string">'password'</span>)</span><br><span class="line">        <span class="keyword">if</span> len(password) &lt; <span class="number">8</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'shortLength'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line">        lower_case = re.compile(<span class="string">'[a-z]'</span>)</span><br><span class="line">        higher_case = re.compile(<span class="string">'[A-Z]'</span>)</span><br><span class="line">        number = re.compile(<span class="string">'[0-9]'</span>)</span><br><span class="line">        symbol = re.compile(<span class="string">'[-=+,#/\?:^$.@*\"※~&amp;%ㆍ!』\\‘|\(\)\[\]\&lt;\&gt;`\'…》]'</span>)</span><br><span class="line"></span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> re.search(lower_case, password):</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> re.search(higher_case, password):</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> re.search(number, password):</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> re.search(symbol, password):</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">        <span class="comment"># 문자 조합이 3가지 미만일 경우</span></span><br><span class="line">        <span class="keyword">if</span> count &lt; <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'wrongCombination'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># request로 받은 password2와 password 값이 일치하지 않는 경우</span></span><br><span class="line">        <span class="keyword">if</span> request.POST.get(<span class="string">'password'</span>) != request.POST.get(<span class="string">'password2'</span>):</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'notMatch'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 사용자가 작성한 회원가입 내용 형식이 정상인 경우</span></span><br><span class="line">        real_name = request.POST.get(<span class="string">'realName'</span>)</span><br><span class="line">        email = request.POST.get(<span class="string">'email'</span>)</span><br><span class="line">        phone_number = request.POST.get(<span class="string">'phoneNumber'</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">'password'</span>)</span><br><span class="line">        profile = request.FILES.get(<span class="string">'profile'</span>)</span><br><span class="line"></span><br><span class="line">        user = User(last_name = real_name[<span class="number">0</span>], first_name=real_name[<span class="number">1</span>:], profile=profile, phone_number=phone_number, username=email)</span><br><span class="line">        user.set_password(password)</span><br><span class="line">        user.save()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'works'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'notValid'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 사용자 로그인</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_login</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.is_ajax():</span><br><span class="line">        <span class="comment"># 이메일 주소를 입력하지 않은 경우</span></span><br><span class="line">        <span class="keyword">if</span> request.POST.get(<span class="string">'email'</span>)==<span class="string">""</span> :</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'noEmail'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 비밀번호를 입력하지 않은 경우</span></span><br><span class="line">        <span class="keyword">elif</span> request.POST.get(<span class="string">'password'</span>)==<span class="string">""</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'noPassword'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">        email = request.POST.get(<span class="string">'email'</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">'password'</span>)</span><br><span class="line">        user = authenticate(username=email, password=password)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            login(request, user)</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'works'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'wrongInformation'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'notAjax'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 사용자 로그아웃</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_logout</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.is_ajax():</span><br><span class="line">        logout(request)</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'works'</span>:<span class="literal">True</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">'notAjax'</span>:<span class="literal">True</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>


      

    </section>
    
      <section class="ArticleMeta">
          <div>
            Posted &nbsp;
            <time datetime="2019-08-31T08:00:21.000Z" itemprop="datePublished">
              2019-08-31
            </time>
          </div>
          
            <div>
              tags: 
  <li class="meta-text">
  { <a href="/tags/Django/">Django</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Ajax/">Ajax</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Signup/">Signup</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Login/">Login</a> }
  </li>


            </div>
          
      </section>
    
    
</article>

  
</div>

            <footer>
    <div>© 2019 - 조현근 </div>
    <div>
        <span>
            Powered by <a href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>
<script src="/js/pager/dist/singlepager.js"></script>
<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>
